    close all;
    garo = 1920 * 100/125;
    sero = 1080* 100/125;
    chang = 80* 100/125; 
    
    X_ts = logsout.get('X');    
    U_ts = logsout.get('u');
    h_ts = logsout.get('h');

    % ë°ì´í„° ì¶”ì¶œ
    X_data = X_ts.Values.Data;
    X1     = X_data(1,:);   
    X2     = X_data(2,:);   
    X3     = X_data(3,:);   
    X4     = X_data(4,:);   
    time = X_ts.Values.Time;  

    U_data = u_ts.Values.Data;
    U1     = U_data(1,:);  
    U2     = U_data(2,:);   

    h_data = h_ts.Values.Data;
    h1     = h_data(1,:);  
    h2     = h_data(2,:);  
    h3     = h_data(3,:);  
    h4     = h_data(4,:);      

    X = [X1;X2;X3;X4];
    U = [U1;U2];

    input = [X;U];
    output = [h1;h2;h3;h4];


    output(1,:) = output(1,:) + 1e-8 * randn(1, size(output,2));
    output(2,:) = output(2,:) + 1e-8 * randn(1, size(output,2));





% Solve an Input-Output Fitting problem with a Neural Network
% Script generated by Neural Fitting app
% Created 05-Jun-2025 23:36:51
%
% This script assumes these variables are defined:
%
%   input - input data.
%   output - target data.
% Choose a Training Function
% For a list of all training functions type: help nntrain
% 'trainlm' is usually fastest.
% 'trainbr' takes longer but may be better for challenging problems.
% 'trainscg' uses less memory. Suitable in low memory situations.

% trainFcn = 'trainlm';  % Levenberg-Marquardt backpropagation.
% 
% % Create a Fitting Network
% hiddenLayerSize = 10;
% net = fitnet(hiddenLayerSize,trainFcn);
% 
% % Setup Division of Data for Training, Validation, Testing
% net.divideParam.trainRatio = 70/100;
% net.divideParam.valRatio = 15/100;
% net.divideParam.testRatio = 15/100;
% % Train the Network
% [net,tr] = train(net,x,t);

% === ë„¤íŠ¸ì›Œí¬ ìƒì„± ë° ì„¤ì • ===
n_input = 6; n_hidden = 10; n_output = 4;

net = network;
net = init(net);
net.numInputs = 1;
net.numLayers = 2;

net.inputConnect(1,1) = 1;             % ì…ë ¥ â†’ ì€ë‹‰ì¸µ
net.layerConnect(2,1) = 1;             % ì€ë‹‰ì¸µ â†’ ì¶œë ¥ì¸µ
net.outputConnect(2)  = 1;             % ì¶œë ¥ì¸µ â†’ ì¶œë ¥
net.biasConnect = [0; 0];              % Bias ì œê±°

% === ì •ê·œí™”  ===
net.inputs{1}.processFcns = {};
net.outputs{2}.processFcns = {};

net.inputs{1}.size = n_input;
net.layers{1}.size = n_hidden;
net.layers{2}.size = n_output;

net.layers{1}.transferFcn = 'tansig';
net.layers{2}.transferFcn = 'purelin';

net.trainFcn = 'trainlm';
net.performFcn = 'mse';
net.divideFcn = 'dividerand';
net.divideParam.trainRatio = 0.7;
net.divideParam.valRatio   = 0.15;
net.divideParam.testRatio  = 0.15;
net.trainParam.min_grad = 1e-12;



% === ì´ˆê¸°í™” í›„, ìˆ˜ë™ weight ì§€ì • ===

net.IW{1,1} = randn(n_hidden, n_input) * 1e-2;
net.LW{2,1} = randn(n_output, n_hidden) * 1e-2;

% === í•™ìŠµ ===
[net, tr] = train(net, input, output);


fprintf("ğŸ“Œ ë„¤íŠ¸ì›Œí¬ êµ¬ì¡° ìš”ì•½\n")
fprintf("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n")
fprintf("ì…ë ¥ ì •ê·œí™” í•¨ìˆ˜     : %s\n", strjoin(net.input.processFcns, ", "))
fprintf("ì¶œë ¥ ì •ê·œí™” í•¨ìˆ˜     : %s\n", strjoin(net.output.processFcns, ", "))
fprintf("ì€ë‹‰ì¸µ í™œì„±í•¨ìˆ˜      : %s\n", net.layers{1}.transferFcn)
fprintf("ì¶œë ¥ì¸µ í™œì„±í•¨ìˆ˜      : %s\n", net.layers{2}.transferFcn)
fprintf("ì‚¬ìš©ëœ í•™ìŠµ ì•Œê³ ë¦¬ì¦˜ : %s\n", net.trainFcn)
fprintf("ì„±ëŠ¥ í‰ê°€ í•¨ìˆ˜       : %s\n", net.performFcn)
fprintf("ì€ë‹‰ ë…¸ë“œ ìˆ˜         : %d\n", net.layers{1}.size)
fprintf("ì…ë ¥ ì°¨ì› ìˆ˜         : %d\n", net.inputs{1}.size)
fprintf("ì¶œë ¥ ì°¨ì› ìˆ˜         : %d\n", net.outputs{2}.size)
fprintf("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n")

% ğŸ“Œ ë„¤íŠ¸ì›Œí¬ êµ¬ì¡° ìš”ì•½
% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
% ì…ë ¥ ì •ê·œí™” í•¨ìˆ˜     : mapminmax
% ì¶œë ¥ ì •ê·œí™” í•¨ìˆ˜     : mapminmax
% ì€ë‹‰ì¸µ í™œì„±í•¨ìˆ˜      : tansig
% ì¶œë ¥ì¸µ í™œì„±í•¨ìˆ˜      : purelin
% ì‚¬ìš©ëœ í•™ìŠµ ì•Œê³ ë¦¬ì¦˜ : trainlm
% ì„±ëŠ¥ í‰ê°€ í•¨ìˆ˜       : mse
% ì€ë‹‰ ë…¸ë“œ ìˆ˜         : 10
% ì…ë ¥ ì°¨ì› ìˆ˜         : 6
% ì¶œë ¥ ì°¨ì› ìˆ˜         : 4
% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


% ì €ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°
V_hat = net.IW{1};     % [n_hidden Ã— n_input]
W_hat = net.LW{2,1};   % [n_output Ã— n_hidden]
b1 = net.b{1};         % [n_hidden Ã— 1]
b2 = net.b{2};         % [n_output Ã— 1]


% Plots
% Uncomment these lines to enable various plots.
%figure, plotperform(tr)
%figure, plottrainstate(tr)
%figure, ploterrhist(e)
%figure, plotregression(t,y)
%figure, plotfit(net,x,t)


